# 용어 검색 시스템

한국어 자연어로 질문하면 관련된 표준 용어를 찾아주는 AI 검색 시스템입니다.

## 한 줄 요약

사용자가 "로그인할때 보안 방식을 어떤 식으로 구축하지?"라고 물어보면 → "OAuth인증", "이중인증", "세션관리" 등 관련 사내 데이터 기반 표준 용어를 찾아서 이유와 함께 제공합니다.

## 빠른 시작

### 1. 설치
```bash
git clone https://github.com/LimPark996/term-search-system.git
cd term-search-system
pip install -r requirements.txt
```

### 2. 환경 설정
```bash
# .env 파일 생성
cp .env.example .env

# .env 파일 편집하여 API 키 입력
OPENAI_API_KEY=your_openai_api_key_here
SPREADSHEET_ID=your_spreadsheet_id_here
```

### 3. Google 인증 파일 설정
- Google Cloud Console에서 OAuth 인증 파일(`credentials.json`) 다운로드
- 프로젝트 루트 폴더에 저장

### 4. 실행
```bash
python main.py
```

## 사용 예시

```
=== 용어 검색 시스템 ===
자연어 질의를 입력하세요: HR 시스템에서 직원 가족 정보 관리하려고 하는데 부양가족 수당 계산이랑 비상연락망 용도로 어떤 데이터를 수집해야 할까요?

🔍 처리 중: 'HR 시스템에서 직원 가족 정보 관리하려고 하는데 부양가족 수당 계산이랑 비상연락망 용도로 어떤 데이터를 수집해야 할까요?'
🎯 정제된 검색어: HR 직원 가족정보 부양가족 수당 비상연락망 데이터

🏆 최종 검색 결과 (3개):

1위. 가족관계명
    설명: 주로 부부를 중심으로 친족 관계에 있는 사람들의 집단과 관련된 정보를 나타내는 이름
    점수: 0.934 (의미: 0.912, 키워드: 0.965)
    AI 검색 근거: 부양가족 수당 계산 시 관계별 지급 기준이 다르므로 가족 관계 구분이 필수

2위. 가족전화번호
    설명: 혈연, 결혼, 입양 등으로 만들어지는 공동체 구성원의 전화번호
    점수: 0.898 (의미: 0.856, 키워드: 0.951)
    AI 검색 근거: 비상연락망 구성을 위해 가족 구성원의 연락처 정보 필요

3위. 가족수당
    설명: 근로자의 생활비 보조를 목적으로 하여 부양가족의 수에 따라 기본급 외에 추가로 지급되는 수당의 액수
    점수: 0.876 (의미: 0.832, 키워드: 0.933)
    AI 검색 근거: 부양가족 수에 따른 수당 계산을 위한 핵심 데이터
```

### 다양한 검색 패턴

```
검색어: "직원 테이블에 가족 정보도 같이 저장해야 하는데 어떤 컬럼들이 필요할까요? 부양가족 관리하려고 합니다"
결과: 가족관계명, 가족전화번호, 가족동거여부

검색어: "이커머스 결제 모듈 개발하고 있는데 가상계좌 발급할 때 어떤 정보들을 DB에 저장해둬야 하나요?"  
결과: 가상계좌은행명, 거래처계좌번호, 거래처예금주명

검색어: "회사 내부 감사팀에서 시스템 감사 들어오는데 감사 진행 상황을 추적할 수 있게 어떤 데이터를 기록해두면 좋을까요?"
결과: 감사내용, 감사일시, 감사인명

검색어: "부동산 관리 시스템 만들고 있어요. 건물 기본 정보 입력 폼에서 꼭 받아야 할 필수 항목들이 뭐가 있을까요?"
결과: 건물주소, 건축일자, 건물전용면적

검색어: "품질관리팀에서 제품 검사하고 나서 그 결과를 시스템에 등록할 수 있게 만들어달라고 하는데 어떤 필드들이 필요한지 모르겠어요"
결과: 검수결과내용, 검사번호, 검사담당자명
```

## 주요 특징

- **일상 언어로 검색**: "파일 올리는거", "로그인할때 쓰는 그거" 등 구어체로 검색 가능
- **오타도 OK**: 정확한 용어를 몰라도 비슷하게 입력하면 관련 표준 용어 찾아줌
- **3개 후보 제시**: 가능성 있는 용어 3개를 점수와 함께 제시
- **선택 근거 제공**: 왜 이 용어가 적합한지 AI가 설명해줌
- **기존 용어 재활용**: 새 용어 만들기 전에 이미 있는 표준 용어 확인 가능

## 시스템 요구사항

- Python 3.8 이상
- OpenAI API 키
- Google Sheets API 접근 권한
- 인터넷 연결 (초기 설정 및 첫 실행시)

## 데이터 소스

- **용어 데이터**: Google Sheets로 관리되는 표준 용어 사전
- **검색 엔진**: OpenAI 임베딩 기반 벡터 검색
- **AI 분석**: GPT 모델을 활용한 맥락적 용어 선별

## 문제 해결

### Google 인증 오류
```bash
# 토큰 재생성
rm token.json
python main.py
```

### 느린 첫 실행
- 첫 실행시 용어 데이터 처리로 3-5분 소요 (정상)
- 이후 실행은 캐시로 즉시 검색

### API 키 오류
- `.env` 파일의 `OPENAI_API_KEY` 확인
- API 키 유효성 및 잔액 확인

## 기술 스택

- **AI**: OpenAI GPT-4, 임베딩 API
- **검색**: FAISS 벡터 데이터베이스
- **언어 처리**: KoNLPy 한국어 형태소 분석
- **데이터**: Google Sheets API
- **언어**: Python 3.8+

---

## 기술 상세 정보

### 시스템 아키텍처
4단계 파이프라인으로 구성:
1. **전처리**: 자연어 질의를 검색 쿼리로 변환
2. **하이브리드 검색**: 의미적 + 키워드 기반 후보 추출  
3. **AI 분석**: GPT를 활용한 맥락적 용어 선별
4. **결과 제공**: 검색 근거와 함께 최종 결과 제공

### 캐시 시스템
- `semantic_embeddings.npy`: 용어별 의미 벡터
- `token_metadata.pkl`: 토큰별 메타데이터
- `faiss_index.bin`: 벡터 검색 인덱스

### 향후 계획
현재 용어 검색을 기반으로 실시간 데이터베이스 쿼리 시스템으로 확장 예정:
- 자연어 질의 → 용어 매칭 → SQL 생성 → 데이터 조회
